<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>ETC5543ppt.utf8</title>
    <meta charset="utf-8" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="styling.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">




class: middle
background-color: #E0FFFF

&lt;div style="width: 100%; height: 150px; background: #B0C4DE; padding: 1em 1em 1em 1em; text-align:center; font-weight: bold;"&gt;
&lt;p style="font-size:32px;"&gt;ETC5543 Business Analytics Creative Activity&lt;/p&gt;
&lt;p&gt;Summer Internship (Dec 2020 - Feb 2021)&lt;/p&gt;
&lt;/div&gt;

&lt;h3&gt;Varsha Ujjinni Vijay Kumar&lt;/h3&gt;

.pull-left[[Master of Business Analytics - Monash University  
BE. in Information Technology and Technology (India)] ]

.pull-right[
&lt;img src="images/varshaujjini.png" width="150px"&gt;]

.left[&lt;svg style="height:0.8em;top:.04em;position:relative;" viewBox="0 0 448 512"&gt;&lt;path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/&gt;&lt;/svg&gt; [Varsha](https://www.linkedin.com/in/varsha-ujjinni-vijay-kumar-1026121a4/) &lt;br&gt;&lt;svg style="height:0.8em;top:.04em;position:relative;" viewBox="0 0 512 512"&gt;&lt;path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/&gt;&lt;/svg&gt; [vujj0001@student.monash.edu](mailto:vujj0001@student.monash.edu)]
---
class: inverse
## About the internship program üë®‚Äçüî¨

Visiting Student(remote) at [**KAUST**](https://www.kaust.edu.sa/en) 

The Visiting Student Program at KAUST - aims at offering research experience for international students over short courses of time.

.pull-left[

Supervisor: Dr.Paula Moraga

.small-font[Assistant Professor at KAUST  
[www.paulamoraga.com](https://www.paulamoraga.com/)
]]

.pull-right[
&lt;img src="images/paulamoraga.png" width="150px"&gt;
]


---
class: inverse
## Background üìö

--
Open and reliable data, analytical tools and collaborative research are crucial for solving global challenges and achieving sustainable development

--

Spatial and spatio-temporal data are used in a wide range of fields including health and many other social and environmental disciplines to improve the evaluation and monitoring of goals both within and across countries.

---
class: inverse
## Goals for the internship üìÑ

- To Create a collection of data sources and tutorials using R, to assist data-driven map visualisation in Africa for research and analysis. To help researchers find the root cause for many of the epidemic diseases spread across countries. 

- Use R packages to download data.

- Provide examples on how to visualise them using multiple methods.
---
class: inverse
## Rspatialdata ‚òÑ  

Rspatialdata is a collection of data sources and tutorials on visualising different spatial features using R.

üìé[https://rspatialdata.github.io](https://rspatialdata.github.io/index.html)

&lt;img src="images/1.PNG" height="300px" style="display: block; margin: auto;" /&gt;

---
class: inverse
## Tools used üõ†

- Simple R Markdown website

- GitHub Pages

- R-packages

- HTML and CSS 

- GitHub

---
# Tutorials üìú

<div id="htmlwidget-a01fd5234a4b92de92ce" style="width:120%;height:70%;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a01fd5234a4b92de92ce">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12"],["Administrative Boundaries ","Open Street Map data","Population","Elevation","Temperature","Rainfall","Humidity","Vegetation","Land Cover ","DHS","Malaria","Air Pollution"],["Rgeoboundaries ","osmdata","wopr","elevatr","raster ","nasapower","nasapower","MODIStsp","MODIStsp","rdhs","malariaAtlas","openair"],["geoBoundaries API","OpenStreetMap","WorldPop Open Population Repository","USGS elevation point query service ","WorldClim","NASA POWER","NASA POWER","MODIStsp","MODIStsp","DHS API","Malaria Atlas Project-data explorer","UK Air Information Resource"],["Github","CRAN","Github","CRAN","CRAN","Github","Github","CRAN","CRAN","Github","CRAN","CRAN"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Spatial.entity<\/th>\n      <th>Package<\/th>\n      <th>Data.source<\/th>\n      <th>Source<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":12,"dom":"t","order":[],"autoWidth":false,"orderClasses":false,"columnDefs":[{"orderable":false,"targets":0}],"lengthMenu":[10,12,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---
# Tutorials üì∞

- .grey[Administrative boundaries]
- .grey[Open Street Map data]  
- .grey[Population]  
-  &lt;i&gt;&lt;b&gt;&lt;u&gt;Elevation&lt;/i&gt;&lt;/b&gt;&lt;/u&gt;  
- .grey[Temperature]  
- &lt;i&gt;&lt;b&gt;&lt;u&gt;Rainfall&lt;/i&gt;&lt;/b&gt;&lt;/u&gt;  
- &lt;i&gt;&lt;b&gt;&lt;u&gt;Humidity&lt;/i&gt;&lt;/b&gt;&lt;/u&gt; 
- .grey[Vegetation] 
- .grey[Land Cover]  
- &lt;i&gt;&lt;b&gt;&lt;u&gt;DHS&lt;/i&gt;&lt;/b&gt;&lt;/u&gt;  
- &lt;i&gt;&lt;b&gt;&lt;u&gt;Malaria&lt;/i&gt;&lt;/b&gt;&lt;/u&gt; 
- .grey[Air pollution]

---
class:inverse
## Elevation ‚õ∞

Task at hand : To visualise a country's elevation data.

Data :

- [USGS Elevation Point Query Service](https://ned.usgs.gov/epqs/)

- [Amazon Web Services Terrain Tiles](https://registry.opendata.aws/terrain-tiles/)

R-package

- [elevatr](https://cran.r-project.org/web/packages/elevatr/index.html)

---
class:inverse
# Elevation data of Switzerland administrative areas

.panelset[
.panel[.panel-name[Map]

&lt;img src="images/elevation.PNG" height="400px" style="display: block; margin: auto;" /&gt;

]
.panel[.panel-name[Code]


```r
library(rnaturalearth)
library(rnaturalearthhires)
sf_swiss &lt;- ne_states(country = 'switzerland', returnclass='sf')

elevation_1 &lt;- elevatr::get_elev_raster(locations = sf_swiss, z = 7,clip = "locations")
cropped_elev &lt;- crop(elevation_1,sf_swiss)
elevate &lt;- as.data.frame(cropped_elev,xy = TRUE)

colnames(elevate)[3] = "elevation_value"
elevate &lt;- elevate[complete.cases(elevate),]

ggplot() +
  #geom_sf(data = st_as_sfc(st_bbox(elevation_1)),color = "grey", fill = "grey",alpha = 0.05) +
  geom_raster(data = elevate , aes(x = x, y = y,fill = elevation_value )) +
  geom_sf(data = sf_swiss, color = "white", fill = NA) +
  coord_sf(xlim = c(5.3,10.8), ylim = c(45.5,47.8))+
  scale_fill_viridis_c()+
  ggtitle("Elevation data of Switzerland admininstrative areas")
```

]
]

---
class: inverse
## Rainfall 

Task at hand : To visualise a country's or the world rainfall data.

Data : [NASA POWER](https://power.larc.nasa.gov/) - NASA Prediction of Worldwide Energy Resource

R-package

[nasapower](https://github.com/ropensci/nasapower)

---
.panelset[
.panel[.panel-name[Map]

&lt;img src="images/china-rain.PNG" height="400px" style="display: block; margin: auto;" /&gt;

]
.panel[.panel-name[Code]


```r
#library("rnaturalearth")

# Getting map for China
CHI &lt;- ne_states(country = "China", returnclass = "sf")

#getting individual administrative boundaries 
GA &lt;- CHI[CHI$name == "Gansu",]
XI &lt;- CHI[CHI$name == "Xinjiang",]
#creating a raster object
r &lt;- rast(xmin = -180,
     xmax = 180,
     ymin = -90,
     ymax = 90,
     resolution = 0.5)

#defining the cell structure 
values(r) &lt;- 1:ncell(r)

#retrieving only the coordinates from the GA &amp; XI tables 
GA_coords &lt;- crop(r,GA)
XI_coords &lt;- crop(r,XI)

#getting the coordinated for the first administrative boundary
GA_coords &lt;- mask(GA_coords,vect(GA))

#converting the coordinated into a dataframe with x and y values to map
GA_df &lt;- as.data.frame(GA_coords, xy = TRUE, na.rm = TRUE)
rownames(GA_df) &lt;- c()

#getting the china administrative boundaries shapefile
gansu_map &lt;- geoboundaries("China","adm1")
ggplot() + 
  geom_raster(data = GA_df, aes(x = x, y = y, fill = lyr.1)) +
  geom_sf(data = gansu_map, inherit.aes = FALSE, fill = NA) + 
  scale_fill_viridis()+
  theme_minimal()+
  labs(title = "Rainfall in Gansu, China", fill = "Rainfall")
```

]
.panel[.panel-name[Map]

&lt;img src="images/world-rain.PNG" height="400px" style="display: block; margin: auto;" /&gt;

]
.panel[.panel-name[Code]


```r
library("rnaturalearth")

# Getting world map
map &lt;- ne_countries(returnclass = "sf")

climate_box &lt;- split(climate_avg, climate_avg$PARAMETER)

climate_box &lt;- lapply(climate_box, function(x){
  x["PARAMETER"] &lt;- NULL
  x
})

climate_box &lt;- lapply(X = climate_box, FUN = as.matrix)

#retrieving precipitation data using the above made climate_box() function
PRECTOT &lt;- terra::rast(climate_box$PRECTOT[,c(1:2, 15)],
     crs = "+proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs", type = "xyz")

#converting above raster object into a data.frame for mapping 
PRECTOT_df &lt;- as.data.frame(PRECTOT, xy = TRUE, na.rm = TRUE)
rownames(PRECTOT_df) &lt;- c()

#plotting the graph
ggplot() + 
  geom_raster(data = PRECTOT_df, aes(x = x, y = y, fill = ANN)) +
  geom_sf(data = map, inherit.aes = FALSE, fill = NA) + 
  scale_fill_viridis()+
  labs(title = "Rainfall in inches",
       fill = "Annual Rainfall",
       subtitle = "Annual rainfall at various parts of the world")
```
]
]

---
class: inverse
## Humidity

Task at hand : To visualise a country's or the world humidity data.

Data : [NASA POWER](https://power.larc.nasa.gov/) - NASA Prediction of Worldwide Energy Resource

R-package

[nasapower](https://github.com/ropensci/nasapower)

---
.panelset[
.panel[.panel-name[Map]

&lt;img src="images/oz-humid.PNG" height="400px" style="display: block; margin: auto;" /&gt;

]
.panel[.panel-name[Code]


```r
library("rnaturalearth")
AUS &lt;- ne_states(country = "Australia",
                 returnclass = "sf")
NT &lt;- AUS[AUS$name == "Northern Territory",]
WA &lt;- AUS[AUS$name == "Western Australia",]
#creating raster objects
rasters &lt;- rast(xmin = -180,
     xmax = 180,
     ymin = -90,
     ymax = 90,
     resolution = 0.5)
values(rasters) &lt;- 1:ncell(rasters)

WA_coord &lt;- mask(WA_coord,vect(WA))
WA_df &lt;- as.data.frame(WA_coord, xy = TRUE, na.rm = TRUE)
rownames(WA_df) &lt;- c()
ggplot() + 
  geom_raster(data = WA_df, aes(x = x, y = y, fill = lyr.1))+ 
  geom_sf(data = AUS, inherit.aes = FALSE, fill = NA)+
  scale_fill_viridis()+
  theme_minimal()+
  labs(title = "Relative Humidity in Western Australia, Australia", fill = "Humidity")
```

]
.panel[.panel-name[Map]

&lt;img src="images/world-humid.PNG" height="400px" style="display: block; margin: auto;" /&gt;

]
.panel[.panel-name[Code]


```r
#getting the shapefiles for the world 
map &lt;- ne_countries(returnclass = "sf")

climate_box &lt;- split(climate_avg_RH,climate_avg_RH$PARAMETER)

climate_box &lt;- lapply(climate_box, function(x){
  x["PARAMETER"] &lt;- NULL
  x
})

climate_box &lt;- lapply(X = climate_box, FUN= as.matrix)

#retrieving the humidity data using the above made climate_box function
relative_humid &lt;- rast(climate_box$RH2M[,c(1:2,15)],
     crs = "+proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs", type = "xyz")

#converting above raster object into a dataframe for mapping 
RH_df &lt;- as.data.frame(relative_humid, xy = TRUE, na.rm = TRUE)
rownames(RH_df) &lt;- c()

#plotting the graph
ggplot() + 
  geom_raster(data = RH_df, aes(x = x, y = y, fill = ANN)) +
  geom_sf(data = map, inherit.aes = FALSE, fill = NA) + 
  scale_fill_viridis()+
  labs(title = "Relative Humidity",
       fill = "Humidity",
       subtitle = "Annual Relative Humidity at various parts of the world")
```
]
]

---
class: inverse
## Demographic and Health Survey[DHS]

Task at hand : To give users the ability to access and analyse the demographic and health survey data of the country or world.

Data : [DHS API](https://api.dhsprogram.com/#/index.html)

R-package

[rdhs](https://www.rdocumentation.org/packages/rdhs/versions/0.7.2)

---
class: inverse
## Getting the data and its analysis

.panelset[
.panel[.panel-name[Guide]

### Some guidelines to access DHS data

- As users, DHS data can only be downloaded through the DHS website by setting up an account. 

- Note that it could take a while for the approval for accessibility as there is tight knit process to analyse your reason for using the data. 

- If one wishes to just use the `rdhs` package to view it's working, then there are model data sets which are not the actual numbers, that can be used without any approval.
]
.panel[.panel-name[Functions]

### Functions:

- `dhs_indicators()` : determines the indicators
- `dhs_tags()` : search the data set by tag names 
- `dhs_data()` : retrieving data
- `dhs_countries()` : retrieves a list of countries that your account has access to
- `dhs_survey()` : retrieves the surveys according to the arguments
- `dhs_datasets()` : helps download all the datasets that is approved for your account.

]

.panel[.panel-name[Authentication]

The following code is used to set your DHS website credentials for retrieval of data approved.


```r
config &lt;- set_rdhs_config(email = "abc.gmail.com",
                project = "project-name",
                config_path = "~/.rdhs.json",
                global = TRUE,
                verbose_download = TRUE)
```

]

.panel[.panel-name[Graph]

&lt;img src="images/dhs.PNG" height="400px" style="display: block; margin: auto;" /&gt;

]
.panel[.panel-name[Code]


```r
#regions we are interested in
country &lt;- c("Ghana","Ethiopia","Tanzania","Zambia","Rwanda","Mali") 

ggplot(resp[resp$CountryName %in% country,], 
       aes(x = SurveyYear, 
           y = Value, 
           color = CountryName)) + 
  geom_point()+
  geom_smooth(method = "lm") +
  labs(y = "Households with at least one ins ecticide treated net (ITN)", color = "Country")+
  facet_wrap(~CountryName)
```

]]

---
class: inverse
### Malaria

Task at hand :  To download, visualise and manipulate global malaria data hosted by the Malaria Atlas Project.

Data : [Malaria Atlas Project](https://malariaatlas.org/explorer/#/)

R-package

- [malariaAtlas](https://cran.r-project.org/web/packages/malariaAtlas/index.html)

---
class:inverse
# Malaria Data Visualisation

.panelset[
.panel[.panel-name[Map]

&lt;img src="images/malaria.PNG" height="400px" style="display: block; margin: auto;" /&gt;

]
.panel[.panel-name[Code]


```r
ZM_PR_data  &lt;- getPR(country = "Zimbabwe", species = "BOTH") 
autoplot(ZM_PR_data)
```

]

.panel[.panel-name[Map]

&lt;img src="images/vector.PNG" height="400px" style="display: block; margin: auto;" /&gt;

]
.panel[.panel-name[Code]


```r
IN_VEC_data &lt;- getVecOcc(country = "India", species = "ALL") 
autoplot(IN_VEC_data)
```

]

.panel[.panel-name[Map]

&lt;img src="images/raster-mal.PNG" height="400px" style="display: block; margin: auto;" /&gt;

]
.panel[.panel-name[Code]


```r
ZM_shp &lt;- getShp(country = "Zimbabwe", admin_level = "admin0")
ZMB_Pf &lt;- getRaster(surface = "Plasmodium falciparum PR2-10", shp = ZM_shp, year = 2010)
ZMB_Pf &lt;- as.MAPraster(ZMB_Pf)
ZMB_shp_data &lt;- as.MAPshp(ZM_shp)
autoplot(ZMB_Pf, shp_df = ZMB_shp_data)  
```
]
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
